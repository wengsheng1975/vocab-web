/* ========================================
   EnglishReader - 英语阅读学习网站样式表
   ======================================== */

:root {
  --primary: #6366f1;
  --primary-dark: #4f46e5;
  --primary-light: #818cf8;
  --secondary: #f1f5f9;
  --accent: #06b6d4;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --text: #1e293b;
  --text-light: #64748b;
  --text-lighter: #94a3b8;
  --bg: #f8fafc;
  --card-bg: #ffffff;
  --border: #e2e8f0;
  --shadow: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
  --radius: 12px;
  --radius-sm: 8px;
  --radius-xs: 6px;
  --transition: 0.2s ease;
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
  background: var(--bg); color: var(--text); line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

a { text-decoration: none; color: var(--primary); }
a:hover { color: var(--primary-dark); }
button { cursor: pointer; border: none; font-family: inherit; font-size: inherit; }
input, textarea, select { font-family: inherit; font-size: 0.95rem; }

.loading { display: flex; align-items: center; justify-content: center; min-height: 300px; font-size: 1.1rem; color: var(--text-light); }

/* ========== 导航栏 ========== */
.navbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 2rem; height: 64px; background: var(--card-bg);
  border-bottom: 1px solid var(--border); box-shadow: var(--shadow);
  position: sticky; top: 0; z-index: 100;
}
.navbar-brand a { display: flex; align-items: center; gap: 0.5rem; color: var(--text); font-weight: 700; }
.logo-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white; border-radius: var(--radius-sm); font-size: 1.1rem; font-weight: 800;
}
.logo-text { font-size: 1.15rem; }
.navbar-links { display: flex; gap: 0.25rem; }
.navbar-links a {
  padding: 0.5rem 1rem; border-radius: var(--radius-xs); color: var(--text-light);
  font-size: 0.9rem; font-weight: 500; transition: all var(--transition);
}
.navbar-links a:hover { background: var(--secondary); color: var(--text); }
.navbar-links a.active { background: var(--primary); color: white; }
.navbar-user { display: flex; align-items: center; gap: 0.75rem; }
.user-level { font-size: 0.75rem; background: var(--primary); color: white; padding: 0.15rem 0.5rem; border-radius: 999px; font-weight: 600; }
.username { font-size: 0.9rem; color: var(--text-light); font-weight: 500; }
.btn-logout {
  padding: 0.4rem 0.8rem; background: transparent; color: var(--text-light);
  border: 1px solid var(--border); border-radius: var(--radius-xs); font-size: 0.85rem;
  transition: all var(--transition);
}
.btn-logout:hover { border-color: var(--danger); color: var(--danger); }

.main-content { max-width: 1100px; margin: 0 auto; padding: 2rem 1.5rem; }

/* ========== 认证页面 ========== */
.auth-page {
  display: flex; align-items: center; justify-content: center;
  min-height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1rem;
}
.auth-card { width: 100%; max-width: 420px; background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow-lg); overflow: hidden; }
.auth-header { text-align: center; padding: 2.5rem 2rem 1.5rem; background: linear-gradient(135deg, rgba(99,102,241,0.05), rgba(6,182,212,0.05)); }
.auth-logo {
  display: inline-flex; align-items: center; justify-content: center;
  width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white; border-radius: 16px; font-size: 1.6rem; font-weight: 800; margin-bottom: 1rem;
}
.auth-header h1 { font-size: 1.5rem; margin-bottom: 0.25rem; }
.auth-header p { color: var(--text-light); font-size: 0.9rem; }
.auth-form { padding: 1.5rem 2rem 2rem; }
.auth-form h2 { margin-bottom: 1.25rem; font-size: 1.2rem; }

/* ========== 表单 ========== */
.form-group { margin-bottom: 1rem; }
.form-group label { display: block; margin-bottom: 0.35rem; font-weight: 500; font-size: 0.9rem; color: var(--text); }
.required { color: var(--danger); }
.form-group input, .form-group textarea, .form-group select {
  width: 100%; padding: 0.65rem 0.85rem; border: 1.5px solid var(--border);
  border-radius: var(--radius-xs); background: var(--card-bg); color: var(--text);
  transition: border-color var(--transition), box-shadow var(--transition);
}
.form-group input:focus, .form-group textarea:focus, .form-group select:focus {
  outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(99,102,241,0.15);
}
.form-group textarea { resize: vertical; }
.form-desc { color: var(--text-light); margin-bottom: 1.25rem; line-height: 1.7; }

/* ========== 语法检查 ========== */
.check-status {
  font-size: 0.75rem; font-weight: 500; margin-left: 0.75rem;
  padding: 0.15rem 0.5rem; border-radius: 999px;
}
.check-status.checking { background: #fef3c7; color: #b45309; }
.check-status.done { background: #d1fae5; color: #059669; }

.grammar-summary {
  display: flex; gap: 1rem; padding: 0.6rem 1rem; margin-bottom: 0.75rem;
  background: var(--secondary); border-radius: var(--radius-xs);
  font-size: 0.85rem; flex-wrap: wrap; align-items: center;
}
.gs-fixed { color: #059669; font-weight: 500; }
.gs-fixed::before { content: '\2713 '; }
.gs-warnings { color: #b45309; font-weight: 500; }
.gs-warnings::before { content: '\26A0 '; }
.gs-clean { color: #059669; font-weight: 600; }
.gs-clean::before { content: '\2714 '; }

.grammar-preview {
  padding: 1rem 1.25rem; margin-bottom: 1rem;
  background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius-xs);
  font-size: 0.9rem; line-height: 1.8; color: var(--text);
  max-height: 250px; overflow-y: auto; white-space: pre-wrap; word-break: break-word;
}

.grammar-error {
  position: relative;
  text-decoration: underline wavy #dc2626;
  text-decoration-skip-ink: none;
  text-underline-offset: 3px;
  background: rgba(220, 38, 38, 0.06);
  cursor: pointer; border-radius: 2px;
  padding: 0 1px;
}
.grammar-error:hover { background: rgba(220, 38, 38, 0.12); }

.grammar-tooltip {
  position: absolute; left: 0; top: 100%; margin-top: 4px;
  background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius-sm);
  box-shadow: var(--shadow-lg); padding: 0.65rem 0.85rem;
  z-index: 50; min-width: 220px; max-width: 350px;
  font-size: 0.85rem; line-height: 1.5; white-space: normal;
  text-decoration: none;
}
.gt-message { display: block; color: var(--text); margin-bottom: 0.5rem; }
.gt-suggestions { display: flex; gap: 0.35rem; flex-wrap: wrap; margin-bottom: 0.4rem; }
.gt-suggest-btn {
  padding: 0.2rem 0.6rem; background: #eef2ff; color: var(--primary);
  border-radius: var(--radius-xs); font-size: 0.8rem; font-weight: 600;
  transition: background var(--transition); cursor: pointer;
}
.gt-suggest-btn:hover { background: #e0e7ff; }
.gt-dismiss-btn {
  padding: 0.15rem 0.5rem; background: var(--secondary); color: var(--text-lighter);
  border-radius: var(--radius-xs); font-size: 0.75rem; cursor: pointer;
}
.gt-dismiss-btn:hover { background: var(--border); }

/* ========== 按钮 ========== */
.btn-primary {
  display: inline-flex; align-items: center; justify-content: center;
  width: 100%; padding: 0.7rem 1.5rem;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white; border-radius: var(--radius-xs); font-weight: 600; font-size: 0.95rem;
  transition: all var(--transition); border: none;
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(99,102,241,0.4); }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.btn-secondary {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 0.7rem 1.5rem; background: var(--secondary); color: var(--text);
  border-radius: var(--radius-xs); font-weight: 500; font-size: 0.95rem;
  transition: all var(--transition); border: 1px solid var(--border);
}
.btn-secondary:hover { background: var(--border); }
.btn-small { padding: 0.35rem 0.75rem; border-radius: var(--radius-xs); font-size: 0.85rem; transition: all var(--transition); }
.btn-master { background: #f0fdf4; color: #16a34a; }
.btn-master:hover { background: #dcfce7; }
.btn-restore { background: #eef2ff; color: var(--primary); }
.btn-restore:hover { background: #e0e7ff; }

/* ========== 消息 ========== */
.error-msg { padding: 0.75rem 1rem; background: #fef2f2; color: #dc2626; border: 1px solid #fecaca; border-radius: var(--radius-xs); margin-bottom: 1rem; font-size: 0.9rem; }
.success-msg { padding: 0.75rem 1rem; background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; border-radius: var(--radius-xs); margin-bottom: 1rem; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between; }
.btn-close { background: transparent; color: inherit; font-size: 1.4rem; padding: 0 0.25rem; line-height: 1; }
.auth-divider {
  display: flex; align-items: center; gap: 1rem; margin: 1.25rem 0;
  color: var(--text-lighter); font-size: 0.85rem;
}
.auth-divider::before, .auth-divider::after {
  content: ''; flex: 1; height: 1px; background: var(--border);
}
.btn-demo {
  display: inline-flex; align-items: center; justify-content: center;
  width: 100%; padding: 0.7rem 1.5rem;
  background: linear-gradient(135deg, #06b6d4, #0891b2);
  color: white; border-radius: var(--radius-xs); font-weight: 600; font-size: 0.95rem;
  transition: all var(--transition); border: none;
}
.btn-demo:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(6,182,212,0.4); }
.btn-demo:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.auth-switch { text-align: center; margin-top: 1.25rem; color: var(--text-light); font-size: 0.9rem; }
.auth-switch a { font-weight: 600; }

/* ========== 页面通用 ========== */
.page-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 0.5rem; }
.page-header h1 { font-size: 1.5rem; }
.section-card { background: var(--card-bg); border-radius: var(--radius); padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: var(--shadow); border: 1px solid var(--border); }
.section-card h2 { font-size: 1.1rem; margin-bottom: 0.75rem; }
.section-desc { color: var(--text-light); font-size: 0.9rem; margin-bottom: 1rem; }
.empty-state { text-align: center; padding: 3rem 1rem; color: var(--text-light); background: var(--card-bg); border-radius: var(--radius); border: 1px dashed var(--border); }

/* ========== 难度徽章 ========== */
.diff-badge { display: inline-block; padding: 0.2rem 0.6rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; }
.diff-A1 { background: #dcfce7; color: #16a34a; }
.diff-A2 { background: #dbeafe; color: #2563eb; }
.diff-B1 { background: #fef9c3; color: #a16207; }
.diff-B2 { background: #fed7aa; color: #c2410c; }
.diff-C1 { background: #fecaca; color: #dc2626; }
.diff-C2 { background: #e9d5ff; color: #7c3aed; }
.diff-bg-A1 { background: #22c55e; } .diff-bg-A2 { background: #3b82f6; }
.diff-bg-B1 { background: #eab308; } .diff-bg-B2plus { background: #ef4444; }

/* 等级徽章 */
.level-badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.85rem; font-weight: 600; }
.level-unknown { background: var(--secondary); color: var(--text-light); }
.level-A1 { background: #dcfce7; color: #16a34a; }
.level-A2 { background: #dbeafe; color: #2563eb; }
.level-B1 { background: #fef9c3; color: #a16207; }
.level-B2 { background: #fed7aa; color: #c2410c; }
.level-C1 { background: #fecaca; color: #dc2626; }
.level-C2 { background: #e9d5ff; color: #7c3aed; }

/* ========== 首页仪表盘 ========== */
.dashboard { max-width: 900px; margin: 0 auto; }
.welcome-section { margin-bottom: 2rem; }
.welcome-section h1 { font-size: 1.75rem; margin-bottom: 0.5rem; }
.welcome-section p { color: var(--text-light); font-size: 1rem; }

.stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
.stat-card {
  background: var(--card-bg); border-radius: var(--radius); padding: 1.25rem;
  text-align: center; box-shadow: var(--shadow); border: 1px solid var(--border);
  transition: transform var(--transition);
}
.stat-card:hover { transform: translateY(-2px); }
.stat-card.highlight { background: linear-gradient(135deg, var(--danger), #b91c1c); color: white; border-color: transparent; }
.stat-card.highlight .stat-label, .stat-card.highlight .stat-sub { color: rgba(255,255,255,0.8); }
.stat-number { font-size: 2rem; font-weight: 700; line-height: 1.2; }
.stat-label { font-size: 0.85rem; color: var(--text-light); margin-top: 0.25rem; }
.stat-sub { font-size: 0.75rem; color: var(--text-lighter); margin-top: 0.1rem; }

.quick-actions h2 { font-size: 1.1rem; margin-bottom: 1rem; }
.action-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem; }
.action-card {
  display: flex; flex-direction: column; align-items: center; padding: 1.75rem 1rem;
  background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow);
  border: 1px solid var(--border); transition: all var(--transition); text-align: center; color: var(--text);
}
.action-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); border-color: var(--primary-light); color: var(--text); }
.action-card.primary-action { border-color: var(--primary-light); background: linear-gradient(135deg, rgba(99,102,241,0.05), rgba(6,182,212,0.05)); }
.action-icon { font-size: 2rem; margin-bottom: 0.5rem; }
.action-title { font-weight: 600; font-size: 1rem; margin-bottom: 0.25rem; }
.action-desc { font-size: 0.8rem; color: var(--text-light); }

/* 高频生词 */
.high-freq-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.high-freq-item {
  display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.8rem;
  background: #fef2f2; border: 1px solid #fecaca; border-radius: var(--radius-xs);
}
.hf-word { font-weight: 600; color: #dc2626; }
.hf-count { font-size: 0.8rem; color: #ef4444; }

/* 最近阅读 */
.recent-sessions { display: flex; flex-direction: column; gap: 0.5rem; }
.session-item {
  display: block; padding: 0.75rem 1rem; border-radius: var(--radius-xs);
  border: 1px solid var(--border); color: var(--text); transition: all var(--transition);
}
.session-item:hover { border-color: var(--primary-light); background: rgba(99,102,241,0.03); color: var(--text); }
.session-title { font-weight: 600; margin-bottom: 0.25rem; }
.session-meta { display: flex; gap: 0.75rem; font-size: 0.8rem; color: var(--text-light); flex-wrap: wrap; align-items: center; }

/* ========== 导入文章 ========== */
/* 文件上传 */
.content-label-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.35rem; flex-wrap: wrap; gap: 0.5rem; }
.file-upload-area { display: flex; align-items: center; gap: 0.5rem; }
.btn-upload-file {
  padding: 0.35rem 0.85rem; background: linear-gradient(135deg, #06b6d4, #0891b2);
  color: white; border-radius: var(--radius-xs); font-size: 0.8rem; font-weight: 600;
  transition: all var(--transition); border: none; cursor: pointer;
}
.btn-upload-file:hover { transform: translateY(-1px); box-shadow: 0 3px 8px rgba(6,182,212,0.35); }
.btn-upload-file:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.upload-hint { font-size: 0.75rem; color: var(--text-lighter); }

.import-form { max-width: 700px; background: var(--card-bg); border-radius: var(--radius); padding: 2rem; box-shadow: var(--shadow); border: 1px solid var(--border); }
.import-result { max-width: 700px; }
.analysis-card { background: var(--card-bg); border-radius: var(--radius); padding: 1.5rem; box-shadow: var(--shadow); border: 1px solid var(--border); margin-bottom: 1.5rem; }
.analysis-header h3 { font-size: 1.1rem; margin-bottom: 1rem; }
.analysis-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem; }
.analysis-item { text-align: center; }
.analysis-label { display: block; font-size: 0.8rem; color: var(--text-light); margin-bottom: 0.25rem; }
.analysis-value { font-size: 1.1rem; font-weight: 600; }
.appropriateness-msg { padding: 0.75rem 1rem; border-radius: var(--radius-xs); margin: 1rem 0; font-size: 0.9rem; }
.appropriateness-msg.appropriate { background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; }
.appropriateness-msg.inappropriate { background: #fef2f2; color: #dc2626; border: 1px solid #fecaca; }
.analysis-levels h4 { font-size: 0.9rem; margin-bottom: 0.75rem; color: var(--text-light); }
.level-bars { display: flex; flex-direction: column; gap: 0.4rem; }
.level-bar-item { display: flex; align-items: center; gap: 0.5rem; }
.lb-label { width: 2.5rem; font-size: 0.8rem; color: var(--text-light); text-align: right; font-weight: 600; }
.lb-track { flex: 1; height: 16px; background: var(--secondary); border-radius: 8px; overflow: hidden; }
.lb-fill { height: 100%; border-radius: 8px; min-width: 2px; transition: width 0.5s ease; }
.lb-count { width: 6rem; font-size: 0.8rem; color: var(--text-light); }
.import-actions { display: flex; gap: 1rem; }
.import-actions .btn-primary, .import-actions .btn-secondary { width: auto; }

/* ========== 交互式阅读页面 ========== */
.reading-page { max-width: 900px; margin: 0 auto; }
.reading-toolbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.75rem 1rem; background: var(--card-bg); border-radius: var(--radius);
  box-shadow: var(--shadow); border: 1px solid var(--border); margin-bottom: 1rem;
  flex-wrap: wrap; gap: 0.5rem;
}
.toolbar-left { display: flex; align-items: center; gap: 0.75rem; }
.toolbar-right { display: flex; align-items: center; gap: 1rem; }
.btn-back { padding: 0.4rem 0.6rem; background: var(--secondary); border-radius: var(--radius-xs); color: var(--text-light); font-size: 0.9rem; }
.btn-back:hover { background: var(--border); }
.article-title-bar { font-size: 1rem; font-weight: 600; }
.clicked-count { font-size: 0.85rem; color: var(--text-light); }
.clicked-count strong { color: var(--danger); }
.btn-finish {
  padding: 0.5rem 1.25rem; background: linear-gradient(135deg, var(--success), #059669);
  color: white; border-radius: var(--radius-xs); font-weight: 600; font-size: 0.9rem;
  transition: all var(--transition);
}
.btn-finish:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(16,185,129,0.4); }
.btn-finish:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

.reading-hint {
  padding: 0.65rem 1rem; background: #eff6ff; border: 1px solid #bfdbfe;
  border-radius: var(--radius-xs); color: #475569; font-size: 0.85rem; margin-bottom: 1.5rem;
  display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;
}
.hint-item { display: inline; }
.hint-sep { color: #cbd5e1; }
.red-demo { color: #dc2626; font-weight: 700; }
.green-demo { color: #059669; font-weight: 700; }
.count-red { color: #dc2626; }
.count-green { color: #059669; }

/* 词组标签 */
.phrase-tag {
  display: inline-block; font-size: 0.7rem; padding: 0.1rem 0.4rem;
  background: #d1fae5; color: #059669; border-radius: 999px; font-weight: 600;
  margin-left: 0.5rem; vertical-align: middle;
}
.meaning-phrase { color: #059669 !important; }

/* 文章内容 — 可点击的单词 */
.article-content {
  background: var(--card-bg); border-radius: var(--radius); padding: 2rem 2.5rem;
  box-shadow: var(--shadow); border: 1px solid var(--border);
  font-size: 1.1rem; line-height: 2; color: var(--text);
  min-height: 300px;
  user-select: none; -webkit-user-select: none;
}
.readable-word {
  cursor: pointer; padding: 0.1rem 0.05rem; border-radius: 3px;
  transition: background-color 0.15s ease, color 0.15s ease;
}
.readable-word:hover { background: rgba(99,102,241,0.1); }

/* 单词 - 红色 */
.readable-word.word-clicked {
  color: #dc2626 !important; font-weight: 600;
  background: rgba(220,38,38,0.08);
  border-bottom: 2px solid #dc2626;
}

/* 词组 - 绿色 */
.readable-word.word-phrase {
  color: #059669 !important; font-weight: 600;
  background: rgba(16,185,129,0.1);
  border-bottom: 2px solid #10b981;
}
.readable-word.word-phrase:hover {
  background: rgba(16,185,129,0.2);
}

/* 拖动选择预览 - 蓝紫色 */
.readable-word.word-drag-preview {
  background: rgba(99,102,241,0.2) !important;
  border-bottom: 2px dashed #6366f1;
  color: #4f46e5 !important;
}

/* 完成阅读面板 */
.finish-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  display: flex; align-items: center; justify-content: center;
  z-index: 200; padding: 1rem;
}
.finish-panel {
  width: 100%; max-width: 600px; max-height: 85vh;
  background: var(--card-bg); border-radius: var(--radius); overflow: hidden;
  box-shadow: var(--shadow-lg); display: flex; flex-direction: column;
}
.finish-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border);
}
.finish-header h2 { font-size: 1.2rem; }
.finish-desc { padding: 1rem 1.5rem 0.5rem; color: var(--text-light); font-size: 0.9rem; }
.finish-empty { padding: 2rem 1.5rem; text-align: center; }
.finish-empty p { margin-bottom: 1.5rem; color: var(--text-light); }
.finish-empty .btn-primary { width: auto; }
.meanings-scroll { flex: 1; overflow-y: auto; padding: 0.5rem 1.5rem; max-height: 50vh; }
.meaning-row { margin-bottom: 1rem; }
.meaning-word-header { margin-bottom: 0.4rem; }
.meaning-word { font-weight: 700; color: var(--primary-dark); margin-right: 0.75rem; font-size: 1rem; }
.meaning-context { font-size: 0.8rem; color: var(--text-lighter); font-style: italic; }
.meaning-row input {
  width: 100%; padding: 0.5rem 0.75rem; border: 1.5px solid var(--border);
  border-radius: var(--radius-xs); transition: border-color var(--transition);
}
.meaning-row input:focus { outline: none; border-color: var(--primary); }
.finish-actions { display: flex; gap: 1rem; padding: 1rem 1.5rem; border-top: 1px solid var(--border); }
.finish-actions .btn-primary { flex: 1; }
.finish-actions .btn-secondary { flex: 0; white-space: nowrap; }

/* ========== 生词本 ========== */
.vocab-page { max-width: 900px; margin: 0 auto; }
.vocab-stats-bar { display: flex; gap: 0.5rem; }
.vs-item { font-size: 0.8rem; padding: 0.25rem 0.6rem; border-radius: 999px; font-weight: 500; }
.active-item { background: #eef2ff; color: var(--primary); }
.freq-item { background: #fef2f2; color: #dc2626; }
.mastered-item { background: #f0fdf4; color: #16a34a; }

.vocab-controls { display: flex; gap: 1rem; margin-bottom: 1.25rem; flex-wrap: wrap; }
.search-box { flex: 1; min-width: 200px; }
.search-box input {
  width: 100%; padding: 0.6rem 1rem; border: 1.5px solid var(--border);
  border-radius: var(--radius-xs); background: var(--card-bg); transition: border-color var(--transition);
}
.search-box input:focus { outline: none; border-color: var(--primary); }
.filter-controls { display: flex; gap: 0.5rem; }
.filter-controls select {
  padding: 0.6rem 0.85rem; border: 1.5px solid var(--border);
  border-radius: var(--radius-xs); background: var(--card-bg); color: var(--text);
}
.btn-sort-order {
  padding: 0.6rem 0.85rem; background: var(--secondary); border-radius: var(--radius-xs);
  font-size: 0.85rem; color: var(--text-light); transition: all var(--transition);
}
.btn-sort-order:hover { background: var(--border); }

.vocab-list { display: flex; flex-direction: column; gap: 0.5rem; }
.vocab-item {
  background: var(--card-bg); border-radius: var(--radius-sm);
  border: 1px solid var(--border); overflow: hidden; transition: box-shadow var(--transition);
}
.vocab-item:hover { box-shadow: var(--shadow-md); }
.vocab-item.mastered { opacity: 0.7; }
.vocab-main {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.85rem 1.25rem; cursor: pointer; gap: 1rem;
}
.vocab-word-section { display: flex; align-items: baseline; gap: 0.5rem; flex: 1; }
.vocab-word { font-weight: 700; font-size: 1.05rem; color: var(--primary-dark); }
.vocab-phonetic { font-size: 0.85rem; color: var(--text-lighter); }
.vocab-meta { display: flex; align-items: center; gap: 0.5rem; }
.expand-arrow { font-size: 0.75rem; color: var(--text-lighter); }

.freq-badge { font-size: 0.75rem; padding: 0.15rem 0.5rem; border-radius: 999px; font-weight: 600; }
.freq-5 { background: #fef2f2; color: #dc2626; }
.freq-3 { background: #fff7ed; color: #ea580c; }
.freq-2 { background: #fefce8; color: #ca8a04; }
.freq-1 { background: var(--secondary); color: var(--text-light); }
.skip-badge { font-size: 0.75rem; color: var(--success); background: #f0fdf4; padding: 0.15rem 0.5rem; border-radius: 999px; }
.mastered-badge { font-size: 0.75rem; color: #16a34a; background: #dcfce7; padding: 0.15rem 0.5rem; border-radius: 999px; font-weight: 600; }

.vocab-detail { padding: 0 1.25rem 1rem; border-top: 1px solid var(--border); }
.vocab-meanings { padding-top: 0.75rem; }
.vocab-meanings h4 { font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.5rem; }
.meaning-entry { padding: 0.5rem 0; border-bottom: 1px dashed var(--border); }
.meaning-entry:last-child { border-bottom: none; }
.me-meaning { font-weight: 500; margin-bottom: 0.2rem; }
.me-context { font-size: 0.85rem; color: var(--text-light); font-style: italic; margin-bottom: 0.2rem; }
.me-source { font-size: 0.75rem; color: var(--text-lighter); }
.no-meanings { padding: 0.75rem 0; color: var(--text-lighter); font-size: 0.9rem; }
.vocab-actions { display: flex; align-items: center; justify-content: space-between; padding-top: 0.75rem; }
.vocab-date { font-size: 0.8rem; color: var(--text-lighter); }

/* ========== 分页 ========== */
.pagination { display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1.5rem; }
.pagination button {
  padding: 0.5rem 1rem; background: var(--card-bg); border: 1px solid var(--border);
  border-radius: var(--radius-xs); color: var(--text); font-size: 0.9rem; transition: all var(--transition);
}
.pagination button:hover:not(:disabled) { border-color: var(--primary); color: var(--primary); }
.pagination button:disabled { opacity: 0.4; cursor: not-allowed; }
.pagination span { font-size: 0.9rem; color: var(--text-light); }

/* ========== 阅读报告 ========== */
.report-page { max-width: 800px; margin: 0 auto; }
.report-article-title { font-size: 0.9rem; color: var(--text-light); background: var(--secondary); padding: 0.3rem 0.75rem; border-radius: var(--radius-xs); }
.report-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
.report-card {
  display: flex; align-items: center; gap: 0.75rem; padding: 1.25rem;
  background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); border: 1px solid var(--border);
}
.report-card.highlight-card { border-left: 4px solid var(--primary); }
.report-card.success-card { border-left: 4px solid var(--success); }
.rc-icon { font-size: 1.75rem; }
.rc-number { font-size: 1.5rem; font-weight: 700; }
.rc-label { font-size: 0.85rem; color: var(--text-light); }
.rc-sub { font-size: 0.75rem; color: var(--text-lighter); }

.report-details { display: flex; flex-direction: column; gap: 1.25rem; margin-bottom: 2rem; }
.report-section { background: var(--card-bg); border-radius: var(--radius); padding: 1.5rem; box-shadow: var(--shadow); border: 1px solid var(--border); }
.report-section h3 { font-size: 1rem; margin-bottom: 0.75rem; }
.report-section.warning-section { border-left: 4px solid var(--warning); }
.detail-grid { display: flex; gap: 2rem; }
.detail-item { display: flex; align-items: center; gap: 0.5rem; }
.di-label { font-size: 0.85rem; color: var(--text-light); }
.di-value { font-weight: 600; }
.advice-box { padding: 1rem; background: #f0f9ff; border-radius: var(--radius-xs); color: #0369a1; font-size: 0.9rem; line-height: 1.7; }
.high-freq-report-list { display: flex; flex-direction: column; gap: 0.5rem; }
.hfr-item { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0.75rem; background: #fffbeb; border-radius: var(--radius-xs); }
.hfr-word { font-weight: 700; color: #b45309; }
.hfr-count { font-size: 0.85rem; color: #d97706; }
.report-actions { display: flex; gap: 1rem; flex-wrap: wrap; }
.report-actions .btn-primary, .report-actions .btn-secondary { width: auto; }

/* ========== 学习进度 ========== */
.progress-page { max-width: 900px; margin: 0 auto; }
.progress-overview { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
.po-card { background: var(--card-bg); border-radius: var(--radius); padding: 1.25rem; text-align: center; box-shadow: var(--shadow); border: 1px solid var(--border); }
.po-label { font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.5rem; }
.po-level { font-size: 1rem; }
.po-value { font-size: 1.2rem; font-weight: 600; }
.po-trend { font-size: 1.1rem; font-weight: 700; }
.trend-up { color: #16a34a; }
.trend-down { color: #dc2626; }
.trend-stable { color: var(--text-light); }
.improving { color: #16a34a; font-size: 0.8rem; font-weight: 600; }
.declining { color: #dc2626; font-size: 0.8rem; font-weight: 600; }

.chart-container { overflow-x: auto; }
.level-chart, .pct-chart { width: 100%; max-width: 600px; margin: 0 auto; display: block; }

.session-list { display: flex; flex-direction: column; gap: 0.5rem; }
.session-row {
  display: block; padding: 0.75rem 1rem; border-radius: var(--radius-xs);
  border: 1px solid var(--border); color: var(--text); transition: all var(--transition);
}
.session-row:hover { border-color: var(--primary-light); background: rgba(99,102,241,0.03); color: var(--text); }
.sr-title { font-weight: 600; margin-bottom: 0.25rem; }
.sr-meta { display: flex; gap: 0.75rem; font-size: 0.8rem; color: var(--text-light); flex-wrap: wrap; align-items: center; }
.sr-date { color: var(--text-lighter); }

/* ========== 文库页面 ========== */
.library-page { max-width: 900px; margin: 0 auto; }
.library-count { font-size: 0.9rem; color: var(--text-light); background: var(--secondary); padding: 0.3rem 0.75rem; border-radius: var(--radius-xs); }

.library-list { display: flex; flex-direction: column; gap: 0.75rem; }
.library-card {
  background: var(--card-bg); border-radius: var(--radius); padding: 1.25rem;
  box-shadow: var(--shadow); border: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem;
  transition: all var(--transition);
}
.library-card:hover { box-shadow: var(--shadow-md); }
.library-card.has-review { border-left: 4px solid var(--warning); }

.lc-main { flex: 1; min-width: 0; }
.lc-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.4rem; flex-wrap: wrap; }
.lc-title { font-size: 1.05rem; font-weight: 600; }
.lc-badges { display: flex; gap: 0.4rem; align-items: center; }
.review-badge {
  display: inline-block; font-size: 0.7rem; padding: 0.15rem 0.5rem;
  background: #fef3c7; color: #b45309; border-radius: 999px; font-weight: 600;
}
.lc-meta { display: flex; gap: 0.75rem; font-size: 0.8rem; color: var(--text-light); flex-wrap: wrap; margin-bottom: 0.4rem; }
.lc-active-words { display: flex; flex-wrap: wrap; gap: 0.35rem; align-items: center; margin-top: 0.4rem; }
.active-word-tag {
  display: inline-block; padding: 0.1rem 0.5rem; background: #fef2f2;
  color: #dc2626; border-radius: 999px; font-size: 0.75rem; font-weight: 500;
}
.more-tag { font-size: 0.75rem; color: var(--text-lighter); }

.lc-actions { display: flex; flex-direction: column; gap: 0.4rem; flex-shrink: 0; }
.btn-reread {
  padding: 0.45rem 1rem; background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white; border-radius: var(--radius-xs); font-weight: 600; font-size: 0.85rem;
  text-align: center; transition: all var(--transition); white-space: nowrap;
}
.btn-reread:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(99,102,241,0.4); color: white; }
/* 编辑按钮 */
.btn-edit-article {
  padding: 0.35rem 0.75rem; background: #eef2ff; color: var(--primary);
  border: 1px solid #c7d2fe; border-radius: var(--radius-xs); font-size: 0.8rem;
  transition: all var(--transition); text-align: center;
}
.btn-edit-article:hover { background: #e0e7ff; }

.btn-delete-article {
  padding: 0.35rem 0.75rem; background: transparent; color: var(--text-lighter);
  border: 1px solid var(--border); border-radius: var(--radius-xs); font-size: 0.8rem;
  transition: all var(--transition); text-align: center;
}
.btn-delete-article:hover { border-color: var(--danger); color: var(--danger); }
.delete-confirm { display: flex; align-items: center; gap: 0.4rem; font-size: 0.8rem; color: var(--text-light); }
.btn-confirm-yes {
  padding: 0.2rem 0.5rem; background: #fef2f2; color: #dc2626;
  border-radius: var(--radius-xs); font-size: 0.8rem; font-weight: 600;
}
.btn-confirm-no {
  padding: 0.2rem 0.5rem; background: var(--secondary); color: var(--text-light);
  border-radius: var(--radius-xs); font-size: 0.8rem;
}

/* 编辑文章弹窗 */
.edit-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5);
  display: flex; align-items: center; justify-content: center;
  z-index: 200; padding: 1rem;
}
.edit-panel {
  width: 100%; max-width: 700px; max-height: 85vh;
  background: var(--card-bg); border-radius: var(--radius); overflow: hidden;
  box-shadow: var(--shadow-lg); display: flex; flex-direction: column;
}
.edit-panel-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border);
}
.edit-panel-header h2 { font-size: 1.2rem; }
.edit-panel-body { flex: 1; overflow-y: auto; padding: 1.25rem 1.5rem; }
.edit-panel-body .form-group { margin-bottom: 1rem; }
.edit-panel-body textarea { font-size: 0.95rem; line-height: 1.7; }
.edit-panel-footer {
  display: flex; gap: 1rem; padding: 1rem 1.5rem; border-top: 1px solid var(--border);
}
.edit-panel-footer .btn-primary { flex: 1; }
.edit-panel-footer .btn-secondary { flex: 0; white-space: nowrap; }

/* 标题语法提示 */
.title-issues { margin-top: 0.4rem; }
.title-issue-item {
  display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;
  padding: 0.35rem 0.65rem; background: #fef2f2; border-radius: var(--radius-xs);
  font-size: 0.8rem; color: #dc2626; margin-bottom: 0.25rem;
}
.tii-msg { flex-shrink: 0; }
.tii-suggestions { display: flex; gap: 0.3rem; align-items: center; color: var(--text-light); }

/* ========== 复习提醒 ========== */
.review-reminder {
  display: flex; gap: 1rem; padding: 1rem 1.25rem; margin-bottom: 1.5rem;
  background: linear-gradient(135deg, #fffbeb, #fef3c7); border: 1px solid #fde68a;
  border-radius: var(--radius); align-items: flex-start;
}
.reminder-icon { font-size: 1.5rem; flex-shrink: 0; margin-top: 0.1rem; }
.reminder-content { flex: 1; }
.reminder-content strong { display: block; margin-bottom: 0.25rem; color: #92400e; }
.reminder-content p { font-size: 0.9rem; color: #a16207; margin-bottom: 0.5rem; }
.reminder-articles { display: flex; flex-direction: column; gap: 0.35rem; }
.reminder-article-link {
  display: flex; justify-content: space-between; align-items: center;
  padding: 0.4rem 0.75rem; background: rgba(255,255,255,0.7); border-radius: var(--radius-xs);
  color: var(--text); font-size: 0.85rem; transition: background var(--transition);
}
.reminder-article-link:hover { background: rgba(255,255,255,0.95); color: var(--text); }
.ra-title { font-weight: 500; }
.ra-count { font-size: 0.8rem; color: #b45309; font-weight: 600; }
.reminder-more { font-size: 0.85rem; color: var(--primary); font-weight: 600; margin-top: 0.25rem; }

/* 4列快捷操作 */
.action-grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }

/* ========== 响应式 ========== */
@media (max-width: 768px) {
  .navbar { flex-direction: column; height: auto; padding: 0.75rem 1rem; gap: 0.5rem; }
  .navbar-links { flex-wrap: wrap; justify-content: center; }
  .navbar-links a { padding: 0.35rem 0.6rem; font-size: 0.8rem; }
  .main-content { padding: 1rem; }
  .stats-grid, .progress-overview { grid-template-columns: repeat(2, 1fr); }
  .report-summary { grid-template-columns: repeat(2, 1fr); }
  .action-grid { grid-template-columns: 1fr; }
  .action-grid-4 { grid-template-columns: repeat(2, 1fr); }
  .library-card { flex-direction: column; }
  .lc-actions { flex-direction: row; }
  .review-reminder { flex-direction: column; }
  .analysis-grid { grid-template-columns: repeat(2, 1fr); }
  .article-content { padding: 1.25rem; font-size: 1rem; line-height: 1.8; }
  .reading-toolbar { flex-direction: column; align-items: stretch; }
  .toolbar-left, .toolbar-right { justify-content: space-between; }
  .vocab-controls { flex-direction: column; }
  .filter-controls { width: 100%; }
  .filter-controls select { flex: 1; }
  .detail-grid { flex-direction: column; gap: 0.75rem; }
  .report-actions { flex-direction: column; }
  .report-actions .btn-primary, .report-actions .btn-secondary { width: 100%; }
  .finish-panel { max-width: 100%; }
}

@media (max-width: 480px) {
  .stats-grid, .progress-overview, .report-summary { grid-template-columns: 1fr; }
  .stat-number { font-size: 1.5rem; }
  .action-grid-4 { grid-template-columns: 1fr; }
  .auth-card { border-radius: 0; }
  .auth-page { padding: 0; align-items: stretch; }
}
